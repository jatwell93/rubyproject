<div class="container">
  <nav class="breadcrumb">
    <a class="breadcrumb-item" <%= link_to 'Home/', root_path%></a>
    <a class="breadcrumb-item" <%= link_to 'Recipe List/', recipes_path%></a>
    <span class="breadcrumb-item active">Recipe</span>
  </nav>
</div>  
  
  <%= render 'shared/page_title', title: @recipe.name %>
  
  <div class="row">
    <div class="col-md-7">
      <h3><%= @recipe.summary %></h3>
      <div class="show_recipe">
        <%= image_tag(@recipe.picture.url, id: "food-image") if @recipe.picture? %>
      </div>
       <div class = "row hidden-sm-down">
         <div class = "col-sm-4 hidden-sm-down">
            <a href = "#" class = "thumbnail">
               <img src = "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a6/BendigoShamrockHotel.JPG/220px-BendigoShamrockHotel.JPG" alt = "Generic placeholder thumbnail">
            </a>
         </div>
       
         <div class = "col-sm-4">
            <a href = "#" class = "thumbnail">
               <img src = "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a6/BendigoShamrockHotel.JPG/220px-BendigoShamrockHotel.JPG" alt = "Generic placeholder thumbnail">
            </a>
         </div>
       
         <div class = "col-sm-4">
            <a href = "#" class = "thumbnail">
               <img src = "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a6/BendigoShamrockHotel.JPG/220px-BendigoShamrockHotel.JPG" alt = "Generic placeholder thumbnail">
            </a>
         </div>
      </div>
      
      <div id="show-recipe" class="well">
        <h3>Ingredients</h3>
        <ul>
          <% @recipe.ingredients.each do |ingredient| %>
            <li>
              <%= ingredient.name %>
            </li>
          <% end %>
        </ul>
        <h3>Directions</h3>
        <ol>
          <% @recipe.directions.each do |direction| %>
            <li>
              <%= direction.step %>
            </li>
          <% end %>
        </ol>
        <% if @recipe.styles.any? %>
          <p>Styles: <%= render @recipe.styles %></p>
        <% end %>
        <% if @recipe.feeds.any? %>
          <p>Feeds: <%= render @recipe.feeds %></p>
        <% end %>
        <% if @recipe.preptimes.any? %>
          <p>Preptime: <%= render @recipe.preptimes %></p>
        <% end %>
        <p>
          <strong>Notes:</strong>
        </p>
        <%= simple_format(@recipe.description) %>
          <div class="pull-right">
            <%= link_to like_recipe_path(@recipe, like: true), method: :post do %>
              <i class="fa fa-thumbs-o-up" aria-hidden="true"></i> &nbsp <%= @recipe.thumbs_up_total %>
            <% end %> &nbsp&nbsp&nbsp&nbsp
            <%= link_to like_recipe_path(@recipe, like: false), method: :post do %>
              <i class="fa fa-thumbs-o-down" aria-hidden="true"></i> &nbsp <%= @recipe.thumbs_down_total %>
            <% end %>
          </div>
      </div>
      
          <% if logged_in? and (@recipe.user == current_user || current_user.admin?) %>
            <%= link_to "Edit this Recipe", edit_recipe_path(@recipe), class: "btn btn-success pull-right edit" %>
          <% end %> 
          <% if logged_in? and (@recipe.user == current_user || current_user.admin?) %>
            <%= link_to "[Delete Recipe]", @recipe, method: :delete, data: { confirm: "Are you sure?" }, class: "btn btn-danger pull-right delete"%>
          <% end %>
          <div class="social-share-button">
         Share this! <%= social_share_button_tag(@recipe.name) %>
          </div>
    </div>
    <div class="col-md-5 pull-right">
      <%= link_to gravatar_for(@recipe.user, size: 200), user_path(@recipe.user) %>
      <p>
        <h5>Brought to you by: <%= @recipe.user.username %></h5>
      </p>
      </br>
      <h3><br/>Reviews</h3>
          <% if @recipe.reviews.any? %>
            <% @recipe.reviews.each do |c| %>
            
              <div class="well">
                <div class="col-md-2 pull-right">
                  <%= link_to gravatar_for(c.user, size: 100), user_path(c.user) %>
                <strong><%= c.user.username.downcase.capitalize %> </strong>
                </div>
                  <p> <%= c.body %> </p>
                  <i><small><%= c.updated_at.strftime("%m/%d/%Y") %></small></i>
                  
                  <% if c.user == current_user %>
                    <%= link_to "Delete Review", review_recipe_path(:revid => c.id), class:"btn btn-danger btn-small pull-right", method: :delete, data: { confirm: "Are you sure you want to delete this review?" }  %>
                  <% end %>
              </div>
           
                  <% end %>
            <% else %>
            <h5>Be the first to post a review!</h5>
          <% end %>
          
            <div class="form-group">
              <%= form_tag(review_recipe_path, :method=>'post') do %>
                <%= text_area_tag "body", nil, size:"5x5",  class:"form-control" %>
                <%= submit_tag "Submit Review", class: "btn btn-primary" %> <br/><br/>
            </div>
              <% end %>
      <h4><i>You may also like: </i></h4>
      <hr>
        <% @random_recipe.each do |recipe| %>
          <div class="row show-img">
            <div class="image_wrapper hidden-xs-down"><%=image_tag recipe.picture %></div>
            <%= link_to recipe.name, recipe %>
            <%= truncate(recipe.description, length: 150)%> <small><%=link_to 'click to see more', recipe_path(recipe)%></small>
          </div>
        <% end %>
    </div>
  </div>
  <div class="jumbotron">
    <h1 class="display-3">Join the conversation!</h1>
    <p class="lead">Comment below and join the conversation taking place about this Recipe</p>
      <a class="btn btn-primary btn-lg" href="#" role="button">Learn more</a>
    </p>
  </div>
  <a href="javascript:toggleDiv('myContent');" class="btn btn-lg btn-info">Hide/Show comments...</a>
  <br>
  <div class="container well" id="myContent">
    <h3>Comments</h3>
    
    <%= form_for [@recipe, Comment.new] do |f| %>
    <%= f.text_area :body, placeholder: "Add a comment" %><br/>
    <%= f.submit "Add Comment", class:"btn btn-success" %>
    <% end %>
    
    <ul>
      <%= render(partial: 'comments/comment', collection: @recipe.comments) %>
    </ul>
  </div>  
<h5><%= link_to "Return to Recipes Listing", recipes_path, class: "btn btn-warning btn-small" %></h5>
</div>
<script type="text/javascript">
  function toggleDiv(divId) {
     $("#"+divId).toggle();
  }
</script>